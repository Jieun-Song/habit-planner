# 24.05.31 민서좌 코멘트

상태: 시작 전

현재 intent 사용 남발?로 레이아웃 간의 연결했던 부분을 DB 사용을 위해 로직 부분 코틀린 코드를 전부 갈아 엎었습니다.

맨 처음부터 MVVM(Model-View-ViewModel) 패턴을 사용해서 개발 진행했습니다. 먼저 MVVM 패턴은 데이터 바인딩을 통해 UI와 비즈니스 로직을 분리하는 디자인 패턴입니다.

1. **Model**: 데이터 소스와 데이터 로직을 담당합니다. 여기서는 **`Routine`**과 **`Task`** 엔티티, 그리고 데이터베이스 접근을 위한 **`RoutineDao`**, **`AppDatabase`**, **`RoutineRepository`**가 포함됩니다.
2. **View**: UI 요소를 담당합니다. 여기서는 **`ActivityAddRoutineBinding`**과 같은 View Binding 클래스를 사용하여 XML 레이아웃과 연결된 **`AddRoutineActivity`**, **`RoutineListActivity`** 등이 포함됩니다. +**`RunningActivity`**도 포함
3. **ViewModel**: View와 Model 사이의 중개자 역할을 합니다. 비즈니스 로직과 데이터를 처리하여 View에 제공하고, View의 명령을 받아 Model을 조작합니다. 여기서는 **`RoutineViewModel`**이 해당 역할을 수행합니다.

- **Model**: 데이터와 비즈니스 로직을 담당합니다.
    - **`Routine.kt`**와 **`Task.kt`**: 데이터 엔티티를 정의합니다.
    - **`RoutineDao.kt`**: 데이터베이스 접근 객체(DAO)를 정의합니다.
    - **`RoutineRepository.kt`**: 데이터 작업을 관리하고 DAO와 상호작용합니다.
- **View**: 사용자 인터페이스를 담당합니다.
    - XML 레이아웃 파일(**`activity_routine_list.xml`**, **`activity_running.xml`** 등): UI 구성 요소를 정의합니다.
    - **`RoutineListActivity.kt`**와 **`RunningActivity.kt`**: 사용자와 상호작용하며, ViewModel을 사용하여 데이터를 표시합니다.
- **ViewModel**: View와 Model 사이의 중개자 역할을 합니다.
    - **`RoutineViewModel.kt`**: 뷰모델을 정의하여 View와 Model 사이의 데이터를 중개합니다.
    - **`RoutineViewModelFactory.kt`**: ViewModel을 생성하는 팩토리 클래스입니다.

각각의 컴포넌트가 MVVM 패턴에 따라 역할을 수행하며, 데이터 바인딩과 LiveData 등을 사용하여 View와 ViewModel 간의 상호작용을 관리합니다. 이를 통해 UI와 비즈니스 로직이 분리되어 유지보수와 테스트가 용이해집니다.

---

**`MyApp`** 클래스는 일반적으로 Android 애플리케이션에서 **`Application`** 클래스를 상속하여 애플리케이션 전체의 설정을 관리하거나, 애플리케이션의 생명 주기 동안 유지되어야 하는 전역 상태를 저장하는 역할을 합니다.

특히, MVVM 패턴을 사용하는 애플리케이션에서는 **`MyApp`** 클래스에서 종속성 주입(Dependency Injection)을 설정하거나, 데이터베이스와 같은 공유 자원을 초기화하는 데 사용됩니다.

---

현재 다음과 같은 기술을 사용하여 작업하고 있습니다.

1. **코루틴 (Coroutines)**:
    - 비동기 작업을 관리하기 위해 사용하고 있습니다. 특히 데이터베이스 작업과 같은 I/O 작업을 비동기로 처리하여 메인 스레드의 성능을 유지하고 있습니다.
    - **`RoutineRepository.kt`**에서 코루틴을 사용하여 비동기 데이터베이스 작업을 수행하고 있습니다.
    - **`RoutineViewModel.kt`**에서 코루틴을 사용하여 ViewModel의 생명주기를 따르는 비동기 작업을 수행하고 있습니다.
2. **Room**:
    - SQLite 데이터베이스에 대한 추상화 계층으로, SQLite 데이터베이스와의 상호작용을 더 쉽게 만들어줍니다.
    - **`RoutineDao.kt`**에서 데이터베이스 접근 객체(DAO)를 정의하고, **`RoutineRepository.kt`**에서 이를 사용하여 데이터베이스 작업을 수행하고 있습니다.
    - Room을 사용하여 데이터베이스 작업을 수행함으로써 SQLite 데이터베이스와의 상호작용을 더욱 간편하게 처리하고 있습니다.
3. **SQLite**:
    - Room 라이브러리는 내부적으로 SQLite를 사용합니다. SQLite는 안드로이드 내장 관계형 데이터베이스 관리 시스템입니다.
    - Room 라이브러리를 통해 SQLite 데이터베이스에 접근하고 있으며, Room이 SQLite 데이터베이스 작업을 추상화하여 더 쉽게 사용할 수 있도록 해줍니다.

### **요약)**

- **코루틴**: 비동기 작업 및 I/O 작업을 관리하기 위해 사용
- **Room**: SQLite 데이터베이스와 상호작용을 쉽게 만들어주는 라이브러리
- **SQLite**: Room 라이브러리가 내부적으로 사용하는 관계형 데이터베이스 관리 시스템

이러한 기술들을 결합하여 MVVM 패턴을 따르는 구조를 구현하고 있습니다. ViewModel은 코루틴을 사용하여 비동기 데이터베이스 작업을 수행하며, Room 라이브러리를 통해 SQLite 데이터베이스와 상호작용합니다. 이를 통해 클린 아키텍처를 유지하고 비동기 데이터 처리를 효율적으로 관리할 수 있습니다.

---

### 미완성 부분..

- 처음 시작 시 splash 화면과 루틴이 종료 됐을 때의 화면 done은 아직 건드리지 못 했습니다.
- 기존에는 할 일 목록을 사용자가 직접 텍스트로 추가할 수 있었지만 현재는 정해진 3개로 제한됨 → 구현 미완성
- 깃이 익숙하지 않아서 일단 로컬에서 진행했습니다. 그래서 준호님이 api 관련 추가 해놓은 부분 없이 진행했습니다. 이 부분은 브랜치 만들어서 제 로컬 코드랑 병합해보겠습니다…